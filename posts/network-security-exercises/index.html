<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Network Security Exercises" /><meta name="author" content="Hung Pham" /><meta property="og:locale" content="en" /><meta name="description" content="How to Create a LAB VNET with Docker" /><meta property="og:description" content="How to Create a LAB VNET with Docker" /><link rel="canonical" href="https://github.com/nnguyen1602/posts/network-security-exercises/" /><meta property="og:url" content="https://github.com/nnguyen1602/posts/network-security-exercises/" /><meta property="og:site_name" content="Hieu Nguyen" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-06-11T22:15:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Network Security Exercises" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Hung Pham" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Hung Pham","url":"https://www.linkedin.com/in/hung-pham-162a40159/"},"dateModified":"2022-06-11T23:09:11+00:00","datePublished":"2020-06-11T22:15:00+00:00","description":"How to Create a LAB VNET with Docker","headline":"Network Security Exercises","mainEntityOfPage":{"@type":"WebPage","@id":"https://github.com/nnguyen1602/posts/network-security-exercises/"},"url":"https://github.com/nnguyen1602/posts/network-security-exercises/"}</script><title>Network Security Exercises | Hieu Nguyen</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Hieu Nguyen"><meta name="application-name" content="Hieu Nguyen"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/images/avatar/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Hieu Nguyen</a></div><div class="site-subtitle font-italic">DevOps Documentations</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/nnguyen1602" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['ngochieu1993','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Network Security Exercises</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Network Security Exercises</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1591913700" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 11, 2020 </em> </span> <span> Updated <em class="" data-ts="1654988951" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 12, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.linkedin.com/in/hung-pham-162a40159/">Hung Pham</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="853 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><h2 id="how-to-create-a-lab-vnet-with-docker"><span class="mr-2">How to Create a LAB VNET with Docker</span><a href="#how-to-create-a-lab-vnet-with-docker" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The system will look like the following diagram: <img data-src="/assets/images/20190808/ITSEC_virtual_network.png" alt="" data-proofer-ignore><br /> <strong>Note: the ip addresses of the VMs are different from the above diagram (also even if you don’t use docker but normal VMs tool like VirtualBox…), but the method stays the same.</strong></p><ol><li><code class="language-plaintext highlighter-rouge">$ docker network create --driver=bridge --subnet=172.16.2.0/24 --ip-range=172.16.2.0/24 br0</code><li><code class="language-plaintext highlighter-rouge">$ docker network create --driver=bridge --subnet=192.168.1.0/24 --ip-range=192.168.1.0/24 br1</code><li><code class="language-plaintext highlighter-rouge">$ docker network create --driver=bridge --subnet=10.2.4.0/24 --ip-range=10.2.4.0/24 br1</code><li><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span>docker run <span class="nt">--cap-add</span><span class="o">=</span>NET_ADMIN <span class="nt">-ti</span> <span class="nt">--privileged</span> <span class="nt">-P</span> <span class="nt">--name</span><span class="o">=</span>router1 <span class="nt">--net</span> br0 <span class="nt">--ip</span> 172.16.2.4 pthung/itsec-lab /bin/bash  
<span class="nv">$ </span><span class="nb">export </span><span class="nv">PS1</span><span class="o">=</span><span class="s2">"router1@172.16.2.4||192.168.1.5: </span><span class="se">\w</span><span class="s2"> </span><span class="se">\$</span><span class="s2"> "</span>
</pre></table></code></div></div><li><code class="language-plaintext highlighter-rouge">$ docker run --cap-add=NET_ADMIN -ti --privileged -P --name=router2 --net br0 --ip 172.16.2.5 pthung/itsec-lab /bin/bash </code> <code class="language-plaintext highlighter-rouge">$ export PS1="router2@172.16.2.5||10.2.4.2: \w \$ "</code><li>Run 2 end machines:<div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">$ </span>docker run <span class="nt">-ti</span> <span class="nt">--cap-add</span><span class="o">=</span>NET_ADMIN <span class="nt">--privileged</span> <span class="nt">--name</span><span class="o">=</span>vm1 <span class="nt">--net</span> br1 <span class="nt">--ip</span> 192.168.1.100 pthung/itsec-lab /bin/bash  
<span class="nv">$ </span><span class="nb">export </span><span class="nv">PS1</span><span class="o">=</span><span class="s2">"machine1@192.168.1.100: </span><span class="se">\w</span><span class="s2"> </span><span class="se">\$</span><span class="s2"> "</span>  
<span class="nv">$ </span>docker run <span class="nt">-ti</span> <span class="nt">--cap-add</span><span class="o">=</span>NET_ADMIN <span class="nt">--privileged</span> <span class="nt">--name</span><span class="o">=</span>vm2 <span class="nt">--net</span> br2 <span class="nt">--ip</span> 10.2.4.37 pthung/itsec-lab /bin/bash  
<span class="nv">$ </span><span class="nb">export </span><span class="nv">PS1</span><span class="o">=</span><span class="s2">"machine2@10.2.4.37: </span><span class="se">\w</span><span class="s2"> </span><span class="se">\$</span><span class="s2"> "</span>
</pre></table></code></div></div><li>Add interfaces to routers:<br /> <code class="language-plaintext highlighter-rouge">$ docker network connect br1 router1 --ip 192.168.1.5 </code> <code class="language-plaintext highlighter-rouge">$ docker network connect br2 router2 --ip 10.2.4.2</code><li>Setup iptabble for both routers:<div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">$ </span>iptables <span class="nt">-t</span> nat <span class="nt">-A</span> POSTROUTING <span class="nt">--out-interface</span> eth1 <span class="nt">-j</span> MASQUERADE  
<span class="nv">$ </span>iptables <span class="nt">-A</span> FORWARD <span class="nt">--in-interface</span> eth0 <span class="nt">-j</span> ACCEPT  
<span class="nv">$ </span>iptables <span class="nt">-t</span> nat <span class="nt">-A</span> POSTROUTING <span class="nt">--out-interface</span> eth0 <span class="nt">-j</span> MASQUERADE  
<span class="nv">$ </span>iptables <span class="nt">-A</span> FORWARD <span class="nt">--in-interface</span> eth1 <span class="nt">-j</span> ACCEPT
</pre></table></code></div></div><li>For router1: <code class="language-plaintext highlighter-rouge">$ route add -net 10.2.4.0 netmask 255.255.255.0 gateway 172.16.2.5 (ip address of router 2)</code><li>For router2: <code class="language-plaintext highlighter-rouge">route add -net 192.168.1.0 netmask 255.255.255.0 gateway 172.16.2.4 (ip address of router 1)</code><li>For vm1: <code class="language-plaintext highlighter-rouge">$ route add default gateway 192.168.1.5</code><li>For vm2: <code class="language-plaintext highlighter-rouge">$ route add default gateway 10.2.4.2</code></ol><p>Examples for firewall:</p><p><code class="language-plaintext highlighter-rouge">$ iptables -A INPUT -s 192.168.1.0/24 -d 192.168.1.0/24 --protocol tcp --tcp-flags ALL SYN,ACK -j DROP</code><br /> <code class="language-plaintext highlighter-rouge">$ iptables -A FORWARD -m conntrack --ctstate NEW -j DROP</code> (for routers)</p><h2 id="firewall-practice"><span class="mr-2">Firewall practice</span><a href="#firewall-practice" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ol><li><p>Check packet filter rule:</p><p><code class="language-plaintext highlighter-rouge">$ iptables -v -L</code></p><li><p>Drop all forward ICMP packet in router 2:</p><p><code class="language-plaintext highlighter-rouge">$ iptables -A FORWARD -p ICMP -j DROP</code></p><li><p>Flush all the rule in FORWARD:</p><p><code class="language-plaintext highlighter-rouge">$ iptables -F FORWARD</code></p><li><p><strong>Stateless:</strong></p><p>Only allow outgoing TCP connection:</p><p><code class="language-plaintext highlighter-rouge">$ iptables -A FORWARD -d 10.2.4.0/24 -p TCP --tcp-flags SYN,ACK SYN -j DROP</code></p><p>Or with error message:</p><p><code class="language-plaintext highlighter-rouge">$ iptables -A FORWARD -d 10.2.4.0/24 -p TCP --tcp-flags SYN,ACK SYN -j REJECT</code></p><li><p>Stateful with conntrack</p><p>Change policy of FORWARD table to DROP:</p><p><code class="language-plaintext highlighter-rouge">iptables -P FORWARD DROP</code></p><li>Only allow outgoing new TCP connection:<div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span>iptables <span class="nt">-A</span> FORWARD <span class="nt">-s</span> 10.2.4.0/24 <span class="nt">-m</span> conntrack <span class="nt">--ctstate</span> NEW <span class="nt">-j</span> ACCEPT  
<span class="nv">$ </span>iptables <span class="nt">-A</span> FORWARD <span class="nt">-m</span> conntrack <span class="nt">--ctstate</span> ESTABLISHED <span class="nt">-j</span> ACCEPT
</pre></table></code></div></div><li><p><strong>NAT</strong></p><p>Delete the route to 192.168.1.0/24 network on router 2:</p><p><code class="language-plaintext highlighter-rouge">$ route del -net 192.168.1.0/24 gw 172.16.2.4 </code></p><p>Create source NAT at router 1:</p><p><code class="language-plaintext highlighter-rouge">$ iptables -t nat -A POSTROUTING -o eth0 -j SNAT --to 172.16.2.4</code></p><p>Create destination NAT at router 1:</p><p><code class="language-plaintext highlighter-rouge">$ iptables -t nat -A PREROUTING -p TCP --dport 8080 -i eth0 -j DNAT --to 192.168.1.100:8180</code></p></ol><h3 id="application-level-gateway-recap"><span class="mr-2">Application Level Gateway recap:</span><a href="#application-level-gateway-recap" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Advantages:</p><ul><li>user specific rule<li>Fine-gained control (communication peers, functions)<li>Content checking (detect malware, suspicious content)<li>No direct connection between sender/receiver<li>Logging</ul><p>Disadvantages:</p><ul><li>Applciation specific<li>expose to attacks</ul><h3 id="weakness-in-the-concept-of-firewall"><span class="mr-2">Weakness in the concept of Firewall:</span><a href="#weakness-in-the-concept-of-firewall" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Mobile devices<li>Tunnels and encryption</ul><h3 id="other-notes"><span class="mr-2">Other notes</span><a href="#other-notes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><code class="language-plaintext highlighter-rouge">$ iptables -A INPUT -p tcp --dport 7001 -j ACCEPT </code> <code class="language-plaintext highlighter-rouge">$ iptables -A OUTPUT -p tcp --sport 22 -j ACCEPT</code></p><h2 id="openvpn-practice"><span class="mr-2">OpenVPN practice</span><a href="#openvpn-practice" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><strong>For RHEL</strong><br /> <strong>Server:</strong></p><ol><li>Install openvpn:<br /> <code class="language-plaintext highlighter-rouge">$ yum install openvpn</code><li>Get server template file:<br /> <code class="language-plaintext highlighter-rouge">$ cd /usr/share/doc/openvpn-*/sample/sample-config-files/ </code> <code class="language-plaintext highlighter-rouge">$ cp server.conf /etc/openvpn</code><li>Generate keys and certificate and DH file with this: <a href="/posts/how-to-generate-self-signed-certificates/">How to Generate Own Certificates</a><li>Change server.conf file:<div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>push <span class="s2">"redirect-gateway def1 bypass-dhcp"</span>  
push <span class="s2">"dhcp-option DNS 8.8.8.8"</span>  
push <span class="s2">"dhcp-option DNS 8.8.4.4"</span>  
user nobody  
group nobody  
tls-auth ta.key 0
</pre></table></code></div></div><li>Make sure these 3 files are in /etc/openvpn/ : ca.crt server.crt server.key<li>In /etc/openvpn/, generate ta key file:<br /> <code class="language-plaintext highlighter-rouge">$ openvpn --genkey --secret ta.key</code><li>Enable and start server:<br /> <code class="language-plaintext highlighter-rouge">$ systemctl start openvpn@server </code> <code class="language-plaintext highlighter-rouge">$ systemctl enable openvpn@server</code></ol><p><strong>Client:</strong></p><ol><li>Install openvpn:<br /> <code class="language-plaintext highlighter-rouge">$ yum install openvpn</code><li>Generate keys and certificate and DH file with this: <a href="/posts/how-to-generate-self-signed-certificates/">How to Generate Own Certificates</a><li>Copy the ta key file from server to client<li>Create client.ovpn file:<div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>client  
dev tun  
proto udp  
remote ip-address-of-server openvpn-port  
resolv-retry infinite  
nobind  
persist-key  
persist-tun  
verb 3  
ca ca.crt  
cert client2.crt  
key client2.key  
tls-auth ta.key 1
</pre></table></code></div></div><li>Run:<br /> <code class="language-plaintext highlighter-rouge">openvpn --config client.ovpn</code></ol><p><strong>Create config file for OPENVPN tap devices:</strong></p><ol><li>Config file for bridge client:</ol><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>    dev tap0  
    proto tcp-client  
    tls-client  
    remote 172.16.2.5  
    ca /sec/certificates/rootCA-cert.pem  
    cert /sec/certificates/192.168.1.100-cert.pem  
    key /sec/certificates/192.168.1.100-private-key.pem
</pre></table></code></div></div><ol><li>Start script for client:</ol><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>    <span class="c">#!/bin/bash  </span>
    openvpn <span class="nt">--mktun</span> <span class="nt">--dev</span> tap0  
    ifconfig tap0 up  
    ifconfig tap0 10.2.4.212 netmask 255.255.255.0  
    openvpn <span class="nt">--config</span> /sec/openvpn/tap/bridgeclient.conf
</pre></table></code></div></div><ol><li>Config file for bridge server:</ol><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>    dev tap0  
    proto tcp-server  
    tls-server  
    ca /sec/certificates/rootCA-cert.pem  
    cert /sec/certificates/10.2.4.2-cert.pem  
    key /sec/certificates/10.2.4.2-private-key.pem  
    dh /sec/certificates/dh2048.pem
</pre></table></code></div></div><ol><li>(Not succesful yet) Start script for client:</ol><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>    <span class="c">#!/bin/bash  </span>
    openvpn <span class="nt">--mktun</span> <span class="nt">--dev</span> tap0  
    ifconfig tap0 up  
    ifconfig tap0 promisc  
    ifconfig eth0 promisc  
    brctl addbr mybridge  
    brctl addif mybridge tap0  
    brctl addif mybridge eth0  
    ifconfig tap0 0.0.0.0  
    ifconfig eth0 0.0.0.0  
    ifconfig mybridge 172.16.2.5 netmask 255.255.255.0 up  
    openvpn <span class="nt">--config</span> /sec/openvpn/tap/bridgeserver.conf  
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/projects/'>Projects</a>, <a href='/categories/hobby/'>Hobby</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/project/" class="post-tag no-text-decoration" >project</a> <a href="/tags/hobby/" class="post-tag no-text-decoration" >hobby</a> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a> <a href="/tags/lab-network/" class="post-tag no-text-decoration" >lab network</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Network+Security+Exercises+-+Hieu+Nguyen&url=https%3A%2F%2Fgithub.com%2Fnnguyen1602%2Fposts%2Fnetwork-security-exercises%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Network+Security+Exercises+-+Hieu+Nguyen&u=https%3A%2F%2Fgithub.com%2Fnnguyen1602%2Fposts%2Fnetwork-security-exercises%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fgithub.com%2Fnnguyen1602%2Fposts%2Fnetwork-security-exercises%2F&text=Network+Security+Exercises+-+Hieu+Nguyen" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/access-rights-of-files-directories/">Access Rights of Files/Directories</a><li><a href="/posts/basic-commands/">Basics of Unix / Linux Commands</a><li><a href="/posts/network-security-exercises/">Network Security Exercises</a><li><a href="/posts/text-and-typography/">Text and Typography</a><li><a href="/posts/write-a-new-post/">Writing a New Post</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devops/">devops</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/macos/">macos</a> <a class="post-tag" href="/tags/other/">other</a> <a class="post-tag" href="/tags/page/">page</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/certificate/">certificate</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/hobby/">hobby</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/how-to-setup-self-hosted-openvpn-server/"><div class="card-body"> <em class="small" data-ts="1655111160" data-df="ll" > Jun 13, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to setup self-hosted openvpn server</h3><div class="text-muted small"><p> Prerequisite A VM (ubuntu 20.04) should be available for the following steps. Step 1 - Installing OpenVPN and Easy-RSA 1 2 3 4 5 6 sudo apt update sudo apt install openvpn easy-rsa mkdir ~/easy-...</p></div></div></a></div><div class="card"> <a href="/posts/terraform-page/"><div class="card-body"> <em class="small" data-ts="1654970400" data-df="ll" > Jun 11, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Terraform Cheat Sheet</h3><div class="text-muted small"><p> Basic commands Useful functions</p></div></div></a></div><div class="card"> <a href="/posts/it-security-lecture-review/"><div class="card-body"> <em class="small" data-ts="1591914780" data-df="ll" > Jun 11, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>IT Security Lecture Review</h3><div class="text-muted small"><p> I. Introduction 1. Define the term “IT-Security” Protection of information and information systems against unauthorized access and modification and availability of information system services for...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/macos-11-keyboard-skills/" class="btn btn-outline-primary" prompt="Older"><p>11+ Usefull Mac keyboard skills</p></a> <a href="/posts/it-security-lecture-review/" class="btn btn-outline-primary" prompt="Newer"><p>IT Security Lecture Review</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/nnguyen1602">Ngoc Hieu Nguyen</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/devops/">devops</a> <a class="post-tag" href="/tags/github/">github</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/macos/">macos</a> <a class="post-tag" href="/tags/other/">other</a> <a class="post-tag" href="/tags/page/">page</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/certificate/">certificate</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/hobby/">hobby</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
